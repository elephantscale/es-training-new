# AWS Glue

---

## Lesson Objectives
  * Learn about AWS Glue
  * Learn Glue Components
  * Learn Glue WorkFlow

---

## AWS Glue Overview

  * Integrate data from different sources

  * Automatically performs ETL(Extract, Transform and Load)
    - Coordinates, cleanses and formats the database
    - Makes data ready for analysis


  * Server-less - no need for any installations or management

---

## Components of Glue

  * Console access as well as API to perform ETL processes

  * **API** available in several language-based SDK's and AWS CLI

  * **AWS Glue Data Catalog** used for storing metadata about sources and targets
    - Can also use Hive Metastore


  * **AWS Glue Jobs**  handles
    - defining, scheduling and executing ETL operations

---

## AWS Glue Console

* Manage ETL workflow definitions using Glue console.

    - Define jobs, tablets, crawlers, and connections
    - Crawler Run schedules
    - Schedules the Job Triggers and Event Definitions
    - Searches and sorts AWS Glue objects

---

## Data Catalog

  * Catalog contains information about:
    - sources, targets, schema, runtime metrics

<img src="../../assets/images/sagemaker-analyst/catalog-overview.png" style="width:76%;"/>

---

### Populate Catalog via Crawler

  * Crawler uses Classifiers to infer schemas

  * Custom Classifiers can be created

  * Crawler stores metadata (about the metadata!) into Catalog; stores metadata in internal database

---

## Crawlers and Classifiers

  * Crawlers scan, classify, extract and store metadata in Catalog

  * Crawler functions can be programmed through the Crawlers and Classifiers API

  * Crawler functions can be managed via console:

<img src="../../assets/images/sagemaker-analyst/crawlers.png" style="width:76%;"/>

  * Add a Classifier to the Crawler:

<img src="../../assets/images/sagemaker-analyst/classifier.png" style="width:76%;"/>

---

### Workflow of ETL Jobs

  * Select the data source for the job.

  * Select the data target of the job from the Catalog.

  * Customize jobs via arguments and scripts.

  * Schedule job execution

<img src="../../assets/images/sagemaker-analyst/job-overview.png" style="width:76%;"/>

  * Monitor jobs via console

<img src="../../assets/images/sagemaker-analyst/jobs.png" style="width:76%;"/>


---

## ETL Scripts

  * Glue allows us to write or autogenerate ETL scripts with the help of Spark. These are usually run in Python and Scala

  * Glue provides sample templates for editing(such as filter, mapping, join) the script as required for the user.

A sample template autogenerated for filter:

<output> = Filter.apply(frame = <frame>, f = <function>, transformation_ctx = "<transformation_ctx>")

A view of auto-generated scripts:

<img src="../../assets/images/sagemaker-analyst/auto-generated-script.png" style="width:76%;"/>

This image shows a Modal adding the Transform functions to the auto-generated scripts

<img src="../../assets/images/sagemaker-analyst/transform.png" style="width:76%;"/>
